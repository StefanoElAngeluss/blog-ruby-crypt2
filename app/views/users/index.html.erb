<div align="center" class="mb-4">
	<h2>Tous les Utilisateurs</h2>
	<span>il y as <%= pluralize @users.size, "Utilisateur" %></span>
</div>

<div class="table-responsive">
	<table class="table table-sm table-hover">
		<thread>
			<tr>
				<th>Id</th>
				<th>username</th>
				<th>Email</th>
				<th>Confirmation</th>
				<th>Banni ?</th>
				<th>Nom</th>
				<th>Image</th>
				<th>Roles</th>
				<th colspan="3"></th>
			</tr>
		</thread>

		<tbody>
			<% @users.each do |user| %>
				<tr>
					<td><%= link_to user.id, user_path(user) %></td>
					<td><%= link_to user.username, user_path(user), class: 'link_perso' %></td>
					<td><%= user %></td>
					<td><%= boolean_label(user.confirmed?) %></td>
					<td><%= boolean_label(user.access_locked?) %></td>
					<td><%= user.name %></td>
					<td>
						<% if user.image.present? %>
							<%= image_tag user.image, size: "50x50" %>
						<% end %>
					</td>
					<td><%= user.active_roles.join(", ") %></td>
					<td>
						<% if current_user.admin? %>
							<div class="mt-2">
								<p>
									<%= link_to "Supprimer", user, method: :delete, data: { confirm: "Êtes vous sure de vouloir supprimer votre compte ?" }, class: "btn btn-sm btn-danger" %>
									<%= link_to "Rôle", edit_user_path(user), class: "btn btn-sm btn-info" %>
									<% if user.access_locked? %>
										<%= link_to ban_status(user), ban_user_path(user), method: :patch, data: { confirm: "Êtes vous sure de vouloir bannir cet utilisateur ?" }, class: "btn btn-sm btn-secondary" %>
									<% else %>
										<%= link_to ban_status(user), ban_user_path(user), method: :patch, data: { confirm: "Êtes vous sure de vouloir bannir cet utilisateur ?" }, class: "btn btn-sm btn-warning" %>
									<% end %>
								</p>
							</div>
						<% end %>
					</td>
				</tr>
			<% end %>
		</tbody>
	</table>
</div>
